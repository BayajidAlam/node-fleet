
> smartscale-tests@1.0.0 test
> jest

  console.log
    ðŸ§ª Starting SmartScale test suite

      at Object.<anonymous> (setup.ts:23:11)

  console.log
    âœ… Test suite completed

      at Object.<anonymous> (setup.ts:27:11)

PASS pulumi/iam.test.ts
  IAM Roles and Policies
    âœ“ Lambda role should have EC2 permissions (2 ms)
    âœ“ Lambda role should have DynamoDB permissions
    âœ“ Lambda role should have Secrets Manager read permission
    âœ“ Lambda role should have SNS publish permission (1 ms)
    âœ“ Master role should have ECR pull permissions
    âœ“ Worker role should have minimal permissions

  console.log
    ðŸ§ª Starting SmartScale test suite

      at Object.<anonymous> (setup.ts:23:11)

  console.log
    ðŸ§ª Starting SmartScale test suite

      at Object.<anonymous> (setup.ts:23:11)

  console.log
    âœ… Test suite completed

      at Object.<anonymous> (setup.ts:27:11)

  console.log
    âœ… Test suite completed

      at Object.<anonymous> (setup.ts:27:11)

PASS pulumi/vpc.test.ts
  VPC Infrastructure
    âœ“ should create VPC with correct CIDR (2 ms)
    âœ“ should create 2 public subnets in different AZs
    âœ“ should create 2 private subnets in different AZs
    âœ“ should create Internet Gateway
    âœ“ should create NAT Gateways for HA (1 ms)

PASS pulumi/security-groups.test.ts
  Security Groups
    âœ“ master security group should allow K3s API port 6443 (2 ms)
    âœ“ master security group should allow kubelet port 10250
    âœ“ master security group should allow etcd ports 2379-2380
    âœ“ worker security group should allow all traffic from master
    âœ“ lambda security group should allow outbound HTTPS
    âœ“ master security group should allow Prometheus port 9090
    âœ“ master security group should allow Grafana port 3000

  console.log
    ðŸ§ª Starting SmartScale test suite

      at Object.<anonymous> (setup.ts:23:11)

  console.log
    âœ… Test suite completed

      at Object.<anonymous> (setup.ts:27:11)

PASS pulumi/lambda.test.ts
  Lambda Autoscaler Infrastructure
    âœ“ should create Lambda with Python 3.11 runtime (2 ms)
    âœ“ should set Lambda timeout to 300 seconds
    âœ“ should set Lambda memory to 512 MB
    âœ“ should configure Lambda with required environment variables (1 ms)
    âœ“ should create EventBridge rule with 2-minute schedule
    âœ“ should attach Lambda to VPC with private subnets
    âœ“ should create CloudWatch log group with 7-day retention
    âœ“ should grant EventBridge permission to invoke Lambda

Test Suites: 4 passed, 4 total
Tests:       26 passed, 26 total
Snapshots:   0 total
Time:        2.133 s, estimated 5 s
Ran all test suites.
